!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).ReduxOptimisticUI=t()}}(function(){return function t(e,r,i){function n(s,c){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!c&&u)return u(s,!0);if(o)return o(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var f=r[s]={exports:{}};e[s][0].call(f.exports,function(t){var r=e[s][1][t];return n(r||t)},f,f.exports,t,e,r,i)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findIndex=function(t,e){for(var r=t.length,i=0;i<r;i++)if(e(t[i]))return i;return-1}},{}],2:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.optimistic=r.ensureState=r.REVERT=r.COMMIT=r.BEGIN=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},n=t("./array-utils"),o=r.BEGIN="@@optimist/BEGIN",s=r.COMMIT="@@optimist/COMMIT",c=r.REVERT="@@optimist/REVERT",u=function(t){return t&&3===Object.keys(t).length&&t.hasOwnProperty("beforeState")&&t.hasOwnProperty("history")&&t.hasOwnProperty("current")},a=r.ensureState=function(t){return u(t)?t.current:t},f=function(t){return{beforeState:void 0,history:[],current:t}},d=function(t,e,r){var o=t.history;if(0===e){var s=o.slice(1),c=(0,n.findIndex)(s,function(t){return t.meta&&t.meta.optimistic&&!t.meta.optimistic.isNotOptimistic&&t.meta.optimistic.id});if(-1===c)return i({},t,{history:[],beforeState:void 0});var u=s.slice(c),a=o.reduce(function(t,e,i){return i<=c?r(t,e):t},t.beforeState);return i({},t,{history:u,beforeState:a})}var f=o[e],d=Object.assign({},f,{meta:Object.assign({},f.meta,{optimistic:null})}),m=t.history.slice();return m.splice(e,1,d),i({},t,{history:m})},m=function(t,e,r){var o=t.beforeState,s=t.history,c=void 0;if(0===e){var u=s.slice(1),a=(0,n.findIndex)(u,function(t){return t.meta&&t.meta.optimistic&&!t.meta.optimistic.isNotOptimistic&&t.meta.optimistic.id});if(-1===a)return i({},t,{history:[],current:u.reduce(function(t,e){return r(t,e)},o),beforeState:void 0});c=u.slice(a)}else(c=s.slice()).splice(e,1);var f=c.reduce(function(t,e){return r(t,e)},o);return i({},t,{history:c,current:f,beforeState:o})};r.optimistic=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign({maxHistory:100},e);return function(e,p){void 0!==e&&u(e)||(e=f(t(a(e),{})));var l=e.history.length,y=p.meta&&p.meta.optimistic||{},v=y.type,h=y.id;if(l){if(v!==s&&v!==c)return l>r.maxHistory&&console.error("@@optimist: Possible memory leak detected.\n                  Verify all actions result in a commit or revert and\n                  don't use optimistic-UI for long-running server fetches"),i({},e,{history:e.history.concat([p]),current:t(e.current,p)});var O=(0,n.findIndex)(e.history,function(t){return t.meta&&t.meta.optimistic&&t.meta.optimistic.id===h});if(-1===O)throw new Error("@@optimist: Failed to "+(v===s?"commit":"revert")+". Transaction #"+h+" does not exist!");p.meta.optimistic.isNotOptimistic=!0;var b=i({},e,{history:e.history.concat([p]),current:t(e.current,p)});return(v===s?d:m)(b,O,t)}return v===o?i({},e,{history:e.history.concat([p]),current:t(e.current,p),beforeState:e.current}):i({},e,{current:t(e.current,p)})}}},{"./array-utils":1}]},{},[2])(2)});